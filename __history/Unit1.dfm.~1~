object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Customer Contact System'
  ClientHeight = 400
  ClientWidth = 600
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []

  object DBGrid1: TDBGrid
    Left = 0
    Top = 0
    Width = 600
    Height = 200
    Align = alTop
    DataSource = DataSource1
    TabOrder = 0
    TitleFont.Charset = DEFAULT_CHARSET
    TitleFont.Color = clWindowText
    TitleFont.Height = -11
    TitleFont.Name = 'Tahoma'
    TitleFont.Style = []
    Columns = <
      item
        Expanded = False
        FieldName = 'name'
        Title.Caption = 'Customer Name'
        Width = 150
        Visible = True
      end
      item
        Expanded = False
        FieldName = 'email'
        Title.Caption = 'Email'
        Width = 200
        Visible = True
      end
      item
        Expanded = False
        FieldName = 'phone'
        Title.Caption = 'Phone'
        Width = 150
        Visible = True
      end>
  end

  object TabControl1: TTabControl
    Left = 0
    Top = 200
    Width = 600
    Height = 200
    Align = alClient
    Tabs.Strings = (
      'Emails'
      'Phones')
    TabIndex = 0
    TabOrder = 1

    object DBGrid2: TDBGrid
      Left = 4
      Top = 24
      Width = 592
      Height = 172
      Align = alClient
      DataSource = DataSource2
      TabOrder = 0
      TitleFont.Charset = DEFAULT_CHARSET
      TitleFont.Color = clWindowText
      TitleFont.Height = -11
      TitleFont.Name = 'Tahoma'
      TitleFont.Style = []
      Columns = <
        item
          Expanded = False
          FieldName = 'contact_value'
          Title.Caption = 'Email'
          Width = 300
          Visible = True
        end>
    end

    object DBGrid3: TDBGrid
      Left = 4
      Top = 24
      Width = 592
      Height = 172
      Align = alClient
      DataSource = DataSource3
      TabOrder = 1
      TitleFont.Charset = DEFAULT_CHARSET
      TitleFont.Color = clWindowText
      TitleFont.Height = -11
      TitleFont.Name = 'Tahoma'
      TitleFont.Style = []
      Columns = <
        item
          Expanded = False
          FieldName = 'contact_value'
          Title.Caption = 'Phone'
          Width = 200
          Visible = True
        end>
    end
  end

  object MyConnection1: TMyConnection
    Database = 'testdb'
    Username = 'root'
    Password = 'p#x]m[n7R$=35*48!qE%rv'
    Server = 'localhost'
    Port = 3306
    LoginPrompt = False
    Left = 40
    Top = 320
  end

  object MyQuery1: TMyQuery
    Connection = MyConnection1
    SQL.Strings = (
      'SELECT c.id, c.name, '
      '(SELECT contact_value FROM contact_details WHERE customer_id = c.id AND contact_type = ''Email'' LIMIT 1) AS email, '
      '(SELECT contact_value FROM contact_details WHERE customer_id = c.id AND contact_type = ''Telephone'' LIMIT 1) AS phone '
      'FROM customers c')
    Active = True
    Left = 120
    Top = 320
  end

  object DataSource1: TDataSource
    DataSet = MyQuery1
    Left = 160
    Top = 320
  end

  object MyQuery2: TMyQuery
    Connection = MyConnection1
    SQL.Strings = (
      'SELECT contact_value FROM contact_details WHERE customer_id = :id AND contact_type = ''Email''')
    MasterSource = DataSource1
    MasterFields = 'id'
    Active = True
    Left = 200
    Top = 320
    ParamData = <
      item
        DataType = ftInteger
        Name = 'id'
        ParamType = ptInput
        Value = 0
      end>
  end

  object DataSource2: TDataSource
    DataSet = MyQuery2
    Left = 240
    Top = 320
  end

  object MyQuery3: TMyQuery
    Connection = MyConnection1
    SQL.Strings = (
      'SELECT contact_value FROM contact_details WHERE customer_id = :id AND contact_type = ''Telephone''')
    MasterSource = DataSource1
    MasterFields = 'id'
    Active = True
    Left = 280
    Top = 320
    ParamData = <
      item
        DataType = ftInteger
        Name = 'id'
        ParamType = ptInput
        Value = 0
      end>
  end

  object DataSource3: TDataSource
    DataSet = MyQuery3
    Left = 320
    Top = 320
  end
end